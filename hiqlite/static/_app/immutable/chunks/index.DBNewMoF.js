import{n as i,s as h}from"./runtime.Bgs6cuJF.js";const n=[];function p(s,r=i){let o=null;const u=new Set;function c(e){if(h(s,e)&&(s=e,o)){const f=!n.length;for(const t of u)t[1](),n.push(t,s);if(f){for(let t=0;t<n.length;t+=2)n[t][0](n[t+1]);n.length=0}}}function l(e){c(e(s))}function a(e,f=i){const t=[e,f];return u.add(t),u.size===1&&(o=r(c,l)||i),e(s),()=>{u.delete(t),u.size===0&&o&&(o(),o=null)}}return{set:c,update:l,subscribe:a}}export{p as w};
